# 应该被测试的代码 What To Test And What Not To Test
本篇记录了在一个项目中应该被测试和不应该被测试的部分

### 如何才能知道哪些代码应该被测试？
首先，只有在产品代码简洁，逻辑清晰——即有可测试性——的情况下才能知道哪些代码应该被测试。换句话说，如果不知道从哪下手开始测试一个方法，那么说明这个方法代码本身写得就很糟糕，需要重新让方法代码结构化、更简洁。

### 测试方法是测试方法的什么？
单元测试测试的是方法的输出。从全局来说，方法(或函数)按照输出结果分类可以分为两大类：

* 查询类方法`Query`: 查询类方法返回值，查询不一定指查询数据库，只要返回值的方法就属于查询方法
* 命令类方法`Command`: 命令类方法执行动作，经常涉及改变对象在内存中的状态，也可能返回值

测试查询类方法即是对其返回值进行断言判定，判断是否与预期的类型、值相同；测试命令类方法即是测试受命令类方法影响的对象的状态，判断对象状态是否与预期一样，而测试涉及到外部资源(如数据库，web服务)的命令类方法即是测试测试类是否执行了正确的外部调用(如调用方法)。

### 什么不应该被测试？
1. 绝不应该测试计算机语言的功能。如不应该测试C#函数中某些字段是否正确储存了数据
2. 绝不应该测试第三方代码，三方代码都是测试完毕的。比如绝不应该去测试Entity Framework中的代码

暂时想到这么多，最后更新2018/04/28
